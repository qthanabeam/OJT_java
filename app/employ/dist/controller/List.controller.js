sap.ui.define(["ojt/employ/controller/BaseController","sap/ui/model/json/JSONModel","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,n,o){"use strict";return e.extend("ojt.employ.controller.List",{onInit:function(){var e=this.getOwnerComponent().getModel();if(!e){n.show("OData model not initialized");return}this.getView().setModel(e);var t=this.getOwnerComponent().getRouter();t.getRoute("list").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(){var e=this.byId("employeeTable");var t=e.getBinding("items");if(t){t.refresh()}},onItemPress:function(e){var t=e.getSource();var n=this.getOwnerComponent().getRouter();var o=t.getBindingContext().getProperty("ID");n.navTo("detail",{employeeId:o})},onDelete:function(e){var t=e.getSource().getParent();var i=t.getBindingContext();var r=this.getView().getModel();if(!i){n.show("Không thể xác định nhân viên cần xóa");return}var a=i.getProperty("firstName")+" "+i.getProperty("lastName");o.confirm("Bạn có chắc muốn xóa nhân viên "+a+"?",{title:"Xác nhận xóa",onClose:function(e){if(e===o.Action.OK){i.delete("$auto").then(function(){n.show("Nhân viên đã bị xóa");r.refresh()}).catch(function(e){n.show("Lỗi khi xóa nhân viên: "+(e.message||"Unknown error"))})}}})}})});
//# sourceMappingURL=List.controller.js.map