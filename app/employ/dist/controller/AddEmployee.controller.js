sap.ui.define(["ojt/employ/controller/BaseController","sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/ui/model/json/JSONModel","sap/m/MessageBox"],function(e,t,n,o,r){"use strict";return e.extend("ojt.employ.controller.AddEmployee",{onInit:function(){this._resetNewEmployeeModel()},_resetNewEmployeeModel:function(){var e=new o({firstName:"",lastName:"",dateOfBirth:null,gender:"",email:"",hireDate:null,role_ID:"",department_ID:"",performanceRating:1,salary:0});this.getView().setModel(e,"newEmployee")},onNavBack:function(){this._resetNewEmployeeModel();this.getOwnerComponent().getRouter().navTo("list")},onSubmitNewEmployee:function(){var e=this.getView().getModel();var t=this.getView().getModel("newEmployee");var o=t.getData();if(!o.firstName||!o.lastName||!o.email||!o.role_ID||!o.department_ID){n.show("Vui lòng điền đầy đủ các trường bắt buộc");return}var a=/^\w+[\w-+\.]*\@\w+([-\.]\w+)*\.[a-zA-Z]{2,}$/;if(!a.test(o.email)){n.show("Email không hợp lệ");return}r.confirm("Bạn có chắc muốn tạo nhân viên mới?",{title:"Xác nhận",onClose:function(t){if(t===r.Action.OK){var a=e.bindList("/Employees");var i=a.create({firstName:o.firstName,lastName:o.lastName,dateOfBirth:o.dateOfBirth,gender:o.gender,email:o.email,hireDate:o.hireDate,role_ID:o.role_ID,department_ID:o.department_ID,performanceRating:parseInt(o.performanceRating,10),salary:o.salary?parseFloat(o.salary).toFixed(2):"0.00"});i.created().then(function(){n.show("Nhân viên đã được tạo");this._resetNewEmployeeModel();e.refresh();this.getOwnerComponent().getRouter().navTo("list")}.bind(this)).catch(function(e){n.show("Lỗi khi tạo nhân viên: "+(e.message||"Unknown error"))})}}.bind(this)})},onCancel:function(){this._resetNewEmployeeModel();this.getOwnerComponent().getRouter().navTo("list")}})});
//# sourceMappingURL=AddEmployee.controller.js.map