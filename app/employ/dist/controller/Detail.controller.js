sap.ui.define(["ojt/employ/controller/BaseController","sap/m/MessageToast","sap/m/MessageBox"],function(e,t,n){"use strict";return e.extend("ojt.employ.controller.Detail",{onInit:function(){var e=this.getOwnerComponent().getRouter();e.getRoute("detail").attachPatternMatched(this._onRouteMatched,this)},_onRouteMatched:function(e){var t=e.getParameter("arguments").employeeId;var n="/Employees("+t+")";this.getView().bindElement({path:n,parameters:{$expand:"role,department"}})},onNavBack:function(){var e=this.getOwnerComponent().getRouter();e.navTo("list")},onCalculateSalary:function(){var e=this.getView().getModel();var n=this.getView().getBindingContext();if(!n){t.show("Không thể xác định nhân viên");return}var o=n.getProperty("ID");var r=e.bindContext("/calculateSalary(...)");r.setParameter("employeeID",o);r.execute().then(function(){var e=r.getBoundContext().getObject();t.show("Lương đã được tính: $"+e.value);n.refresh()}).catch(function(e){t.show("Lỗi khi tính lương: "+(e.message||"Unknown error"))})},onSave:function(){var e=this.getView().getBindingContext();if(!e){t.show("Không thể lưu - không có context");return}var n=this.byId("roleComboBox");var o=this.byId("departmentComboBox");var r=n.getSelectedKey();var a=o.getSelectedKey();if(r){e.setProperty("role_ID",r)}if(a){e.setProperty("department_ID",a)}e.getModel().submitBatch("$auto").then(function(){t.show("Nhân viên đã được lưu")}).catch(function(e){t.show("Lỗi khi lưu nhân viên: "+(e.message||"Unknown error"))})},onDelete:function(){var e=this.getView().getBindingContext();var o=this.getOwnerComponent().getRouter();if(!e){t.show("Không thể xóa - không có context");return}n.confirm("Bạn có chắc muốn xóa nhân viên này?",{title:"Xác nhận xóa",onClose:function(r){if(r===n.Action.OK){e.delete("$auto").then(function(){t.show("Nhân viên đã bị xóa");o.navTo("list")}).catch(function(e){t.show("Lỗi khi xóa nhân viên: "+(e.message||"Unknown error"))})}}})},onManageLeaves:function(){var e=this.getView().getBindingContext();if(!e){t.show("Không thể xác định nhân viên");return}var n=e.getProperty("ID");var o=this.getOwnerComponent().getRouter();o.navTo("leave",{employeeId:n})}})});
//# sourceMappingURL=Detail.controller.js.map